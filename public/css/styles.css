* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Montserrat', sans-serif;
}
body {
  display: flex;
  height: 100vh;
  background: #fff;
  color: #000;
}
#sidebar {
  position: fixed;
  top: 0;
  left: 0;
  width: 220px;
  height: 100vh;
  background: #00162C;
  display: flex;
  flex-direction: column;
  z-index: 100;
}
#sidebar .logo {
  padding: 1rem;
  text-align: center;
}
.logo-img {
  max-width: 100%;
  height: auto;
  display: inline-block;
}
#sidebar nav {
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow-y: auto;
  overflow-x: hidden;
}
#sidebar nav ul {
  list-style: none;
  margin-top: 1rem;
  display: flex;
  flex-direction: column;
  flex-grow: 1;
}
#sidebar nav li {
  padding: 0.75rem 1rem;
  cursor: pointer;
  transition: background 0.2s;
  color: #fff;
}
#sidebar nav li:hover {
  background: #2e3a4e;
}
#sidebar nav li.active {
  background: #13bf81;
}
#sidebar nav li.nav-section-title {
  padding: 1.5rem 1rem 0.5rem;
  font-weight: bold;
  font-size: 0.85rem;
  color: #8ba3b8;
  cursor: default;
  letter-spacing: 0.05em;
  text-transform: uppercase;
  margin-top: auto;
}
#sidebar nav li.nav-section-title:hover {
  background: transparent;
}
#main {
  position: absolute;
  top: 60px;        /* ⬆ justo debajo del topbar */
  left: 220px;      /* ⬅ al lado del sidebar */
  right: 0;
  bottom: 0;
  display: flex;
  flex-direction: column;
  overflow: hidden; /* el scroll sólo irá en #content */
  }
.refresh-btn {
  display:inline-flex; align-items:center; gap:8px;
  margin-left: 16px;
  padding: 6px 10px;
  font-size: 0.9em;
  font-weight: 600;
  cursor: pointer;
  background: #fff;
  color: #075183;
  border: 1px solid #075183;
  border-radius: 8px;
}
.refresh-btn:hover {
  background: rgba(7, 81, 131, 0.06);
}
.refresh-btn.loading {
  opacity: 0.85;
  cursor: not-allowed !important;
}
.refresh-btn .spinner {
  width: 16px;
  height: 16px;
  display: inline-block;
  border: 2px solid #ddd;
  border-top-color: #075183;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
}
#topbar {
  position: fixed;
  top: 0;
  left: 220px;
  right: 0;
  height: 60px;
  z-index: 200;
  background: #fff;
  display: flex;
  align-items: center;
  padding: 0 16px;
  border-bottom: 1px solid #ddd;
}
#searchId {
  flex: 0 0 300px;
  padding: 0.5rem 1rem;
  border: 1px solid #ccc;
  border-radius: 4px 0 0 4px;
  font-family: 'Montserrat', sans-serif;
}
#searchBtn {
  padding: 0.55rem 1rem;
  border: none;
  background: #075183;
  color: #fff;
  border-radius: 0 4px 4px 0;
  font-weight: 600;
  cursor: pointer;
  font-family: 'Montserrat', sans-serif;
}
#searchBtn:disabled {
  cursor: not-allowed;
}
#statusTop {
  margin-left: 16px;
  font-size: 0.9em;
  color: #666;
}
#createLinkBtn {
  background: #13bf81 !important;
  color: #fff !important;
  border: 1px solid #13bf81 !important;
  font-weight: 600;
  cursor: pointer;
  width: auto;
  padding: 0.5rem 1rem;
}
#createLinkBtn:hover {
  background: #10a16f !important;
  border-color: #10a16f !important;
}
#createLinkBtn:disabled,
#createLinkBtn.loading {
  opacity: 0.85;
  cursor: not-allowed !important;
  background: #999 !important;
  border-color: #999 !important;
}
#createLinkBtn .spinner {
  width: 14px;
  height: 14px;
  display: inline-block;
  border: 2px solid #ddd;
  border-top-color: #13bf81;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  vertical-align: middle;
  margin-right: 6px;
}
#content {
  flex: 1;
  overflow: auto;
}
html, body {
  height: 100%;
  margin: 0;
  /* opcional: evitar scroll horizontal de toda la página */
  overflow-x: hidden;
}
.pane {
  flex: 1;
  min-width: 0;
  padding: 24px;
  display: none;
  background: #fff;
  overflow-y: auto;
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
}
.pane.active {
  display: block;
}
.left {
  max-width: 700px;
}

/* Excepción para Comercialito - debe ocupar todo el ancho disponible */
#comercialito.left {
  max-width: none;
}
.form-row {
  display: flex;
  align-items: center;
  margin-top: 12px;
}
.label {
  width: 140px;
  padding: 6px 8px;
  background: #13bf81;
  color: #fff;
  font-weight: 600;
  border-radius: 4px 0 0 4px;
  font-family: 'Montserrat', sans-serif;
}
.input,
select {
  flex: 1;
  padding: 6px 8px;
  border: 1px solid #ccc;
  background: #fff;
  border-radius: 0 4px 4px 0;
  font-family: 'Montserrat', sans-serif;
}

/* Estilos para wrapper de input con icono callbell */
.input-wrapper {
  flex: 1;
  position: relative;
  display: flex;
  align-items: center;
}

.input-wrapper .input {
  flex: 1;
  padding-right: 35px;
}

.callbell-icon {
  position: absolute;
  right: 8px;
  top: 50%;
  transform: translateY(-50%);
  cursor: pointer;
  font-size: 16px;
  user-select: none;
  z-index: 1;
  background: transparent;
  border: none;
  padding: 2px;
  border-radius: 2px;
  transition: background-color 0.2s;
}

.callbell-icon:hover {
  background-color: rgba(40, 90, 117, 0.1);
}
select.input:invalid,
select.input option[disabled] {
  color: #666;
}
.hidden {
  display: none;
}
table {
  border-collapse: collapse;
  margin-top: 16px;
  font-family: 'Montserrat', sans-serif;
}
th,
td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: center;
}
thead th {
  background: #f5f5f5;
  font-weight: 600;
}
#planPagosTable thead th {
  background: #13bf81;
  color: #fff;
  font-weight: 600;
}
.highlight {
  background: #fffae6;
}
/* Plataforma vieja */
.memb-old {
  overflow-wrap: break-word;
  word-wrap: break-word;
  max-width: 100%;
}

#membOldContainer {
  max-width: 100%;
  overflow-x: auto;
}

#membOldContainer table {
  width:100%;
  table-layout: fixed;
}

#membOldContainer table thead th {
  background: #1E3A8A;
  color:#fff;
}

#membOldContainer table tbody tr.highlight {
  background: #13BF81;
  color:#fff;
}

/* Ajustar el texto de roles para que no exceda el ancho */
#membOldInfo {
  max-width: 100%;
  overflow-wrap: break-word;
  word-wrap: break-word;
}

#membOldInfo div {
  word-wrap: break-word;
  word-break: break-word;
  overflow-wrap: break-word;
  white-space: normal;
  max-width: 100%;
}

/* FRAPP */
#membNewContainer table { width:100%; }
#membNewContainer table thead th { background: #022851; color:#fff; }
#membNewContainer table tbody tr.active { background: #60C5FA; color:#fff; }

.modal.hidden { display: none; }
.modal {
  position: fixed; top:0; left:0; width:100%; height:100%;
  display: flex; align-items:center; justify-content:center;
  z-index: 1000;
}
.modal-backdrop {
  position:absolute; top:0; left:0; width:100%; height:100%;
  background: rgba(0,0,0,0.15);
}
.modal-dialog {
  position: relative;
  background: #fff; padding: 24px; border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.15);
  width: 360px;
}
.modal-dialog h3 {
  margin-bottom:16px;
  font-size:1.2em;
}
.modal-row {
  display:flex; flex-direction:column; margin-bottom:12px;
}
.modal-row label {
  font-weight:600; margin-bottom:4px;
}
.modal-row input,
.modal-row select {
  padding:6px 8px; border:1px solid #ccc; border-radius:4px;
}
.modal-actions {
  display:flex; justify-content:flex-end; gap:8px; margin-top:16px;
}
/* pinta distinto un input disabled para que se note */
input:disabled,
input[readonly] {
  background: #f0f0f0;
  color: #666;
  cursor: not-allowed;
}
.modal-response {
  /* convierte en un flex‐container y separa el contenido */
  display: flex;
  flex-direction: column;    /* contenido arriba, botón abajo */
  align-items: flex-end;     /* alinea a la derecha */
  gap: 8px;                  /* espacio entre líneas y botón */
  padding-top: 8px;          /* espacio antes del botón */
}

/* Dale estilo al botón Continuar */
.modal-response .continue-btn {
  border-radius: 6px;        /* esquinas redondeadas */
  padding: 6px 12px;
  font-size: 0.9em;
  cursor: pointer;
  /* opcional: un sombreadito muy ligero */
  box-shadow: 0 1px 4px rgba(0,0,0,0.1);
}
/* ----- Botón "➕ Agregar plan ----- */
#addMembBtn {
  background-color: #6c63ff;
  color: #fff;
  border: none;
  border-radius: 6px;
  padding: 8px 16px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s;
}
#addMembBtn:hover {
  background-color: #574edb;
}
/* ===== Membresías: layout de 3 columnas ===== */
.memb-layout{
  display: grid;
  grid-template-columns: 1fr 1fr 220px; /* Vieja | Nueva | Acciones angosta */
  gap: 24px;
  align-items: start;
}
.memb-actions{
  display: flex;
  flex-direction: column;
  gap: 12px;
  position: sticky;   /* que no se "pierda" al hacer scroll */
  top: 8px;
}
.memb-actions h4{ margin: 0 0 8px 0; }

/* botón a doble renglón, sin desbordar */
.memb-actions .batch-btn{
  white-space: normal;     /* permite salto de línea */
  text-align: center;
  line-height: 1.2;
  padding: 10px 12px;
  width: 100%;
}

/* Responsive: si el ancho baja, la columna de acciones pasa abajo */
@media (max-width: 1200px){
  .memb-layout{ grid-template-columns: 1fr 1fr; }
  .memb-actions{ grid-column: 1 / -1; flex-direction: row; }
  .memb-actions .batch-btn{ width: auto; }
}

/* Layout para sección Comercialito copiando exactamente el de Membresías */
.comercialito-layout {
  display: grid;
  grid-template-columns: 1fr 1fr; /* Venta normal | Venta en confianza */
  gap: 24px;
  align-items: start;
}

/* Responsive igual que Membresías */
@media (max-width: 1200px) {
  .comercialito-layout {
    grid-template-columns: 1fr 1fr;
    gap: 16px;
  }
}

@media (max-width: 768px) {
  .comercialito-layout {
    grid-template-columns: 1fr;
    gap: 20px;
  }
  #comercialito h3 {
    font-size: 1.1em;
  }
}

/* Títulos de secciones */
.venta-confianza-section h3 {
  color: #285a75 !important;
}

/* Labels especiales para sección confianza */
.venta-confianza-section .label {
  background: #285a75 !important;
  color: #fff;
  font-weight: 600;
  border-radius: 4px 0 0 4px;
}

/* Campos de input en sección confianza - formato idéntico a venta normal */
.venta-confianza-section .input {
  border: 1px solid #ccc;
  border-left: 0;
  border-radius: 0 4px 4px 0;
  background: #fff;
}

.venta-confianza-section .input:focus {
  border-color: #285a75 !important;
  box-shadow: 0 0 0 2px rgba(40, 90, 117, 0.2) !important;
}

/* Estilo para campos deshabilitados y readonly en sección confianza */
.venta-confianza-section .input:disabled,
.venta-confianza-section .input:read-only,
.venta-confianza-section .input.gray {
  background-color: #f5f5f5 !important;
  cursor: not-allowed !important;
}

#buscarAcuerdoBtn {
  background: #285a75 !important;
  color: white !important;
  border: none !important;
  padding: 8px 12px !important;
  border-radius: 4px !important;
  cursor: pointer !important;
  font-size: 14px !important;
}

#buscarAcuerdoBtn:hover {
  background: #1e4a5f !important;
}

#buscarAcuerdoBtn:disabled {
  background: #6b9bb3 !important;
  cursor: not-allowed !important;
}

#buscarAcuerdoBtn .spinner {
  width: 14px;
  height: 14px;
  display: inline-block;
  border: 2px solid #ddd;
  border-top-color: #285a75;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  vertical-align: middle;
  margin-right: 6px;
}

/* Estado sin firmar en rojo */
#estadoAcuerdo.sin-firmar {
  color: #dc3545 !important;
  font-weight: 600 !important;
}

/* Botón Otorgar acceso en confianza - mismo estilo que buscarAcuerdoBtn */
#otorgarAccesoBtn {
  background: #285a75 !important;
  color: white !important;
  border: none !important;
  padding: 8px 12px !important;
  border-radius: 4px !important;
  cursor: pointer !important;
  font-size: 14px !important;
  margin-top: 15px !important;
  display: none; /* Oculto por defecto */
}

#otorgarAccesoBtn:hover {
  background: #1e4a5f !important;
}

#otorgarAccesoBtn:disabled {
  background: #6b9bb3 !important;
  cursor: not-allowed !important;
}

#otorgarAccesoBtn .spinner {
  width: 14px;
  height: 14px;
  display: inline-block;
  border: 2px solid #ddd;
  border-top-color: #285a75;
  border-radius: 50%;
  animation: spin 0.8s linear infinite;
  vertical-align: middle;
  margin-right: 6px;
}

/* Campo de número de acuerdo más ancho */
#nroAcuerdo {
  min-width: 250px;
  flex: 1;
}


/* ----- Botones del modal (Cancelar / Guardar / Continuar) ----- */
.modal-actions button {
  background-color: #f5f5f5;
  color: #333;
  border: 1px solid #ccc;
  border-radius: 6px;
  padding: 6px 12px;
  font-size: 0.9rem;
  font-weight: 600;
  cursor: pointer;
  transition: background-color 0.2s, box-shadow 0.2s;
  margin-left: 8px;          /* separación entre botones */
}
.modal-actions button:hover {
  background-color: #e0e0e0;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

/* Hover styles for search buttons and batch button */
#searchBtn:hover {
  background-color: #054066;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

#batchOpenBtn:hover {
  background-color: #5a52e6;
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
}

/* ----- Posicionamiento del botón "Continuar" dentro de la caja de respuesta ----- */
#modalResponse {
  position: relative;
  padding-bottom: 2.5rem;
}
#modalResponse button {
  /* que fluya en el flujo normal */
  position: static;
  margin-top: 8px;      /* espacio sobre el botón */
  border-radius: 6px;   /* redondeo que ya tenías */
  padding: 6px 12px;
}
#addMembBtn.semi-disabled {
  opacity: 0.5;
}
.student-name {
  color: #777;
  font-weight: 400;
  margin-left: 0.5rem;
  font-size: 0.9em;
}

 /*===== Links ===== */
#linksContainer {
  padding: 16px;
}
#linksControls {
  position: fixed;
  top: 60px;
  left: 220px;
  right: 0;
  z-index: 100;
  background: #fff;
  padding: 12px 24px;
  display: none;
}
#links.pane.active ~ #linksControls,
#links.pane.active #linksControls {
  display: flex;
}
#links.pane.active #linksContainer {
  padding-top: 60px;
}
#linksTableWrap {
  position: relative;
  overflow: auto;
  max-height: calc(100vh - 180px);
}
#linksTableWrap table {
  width: max-content !important;
  border-collapse: separate;
  border-spacing: 0;
}
#linksContainer table {
  width: auto;
  display: inline-table;
  min-width: 600px;
  font-family: 'Montserrat', sans-serif;
}
#linksContainer th,
#linksContainer td {
  border: 1px solid #ddd;
  padding: 8px;
  text-align: center;
}
#linksContainer thead th {
  background: #434fab;
  color: #fff;
  font-weight: 600;
  position: sticky;
  top: 0;
  z-index: 10;
  border: 1px solid #ddd;
}
#linksContainer tbody tr {
  background: #fff;      /* filas blancas */
  color: #000;           /* texto negro */
}
#linksContainer a {
  color: #075183;
  text-decoration: underline;
}
#linksContainer tbody tr.expired-link {
  background: #f0f0f0;
}
#ventasContainer table {
  font-size: 0.9rem;
}
#ventasContainer table thead th {
   background: #f37808;
   color: #fff;
 }
#ventasContainer .highlight {
  background: #ffba6e;
}
#ventasContainer .summary strong {
  font-weight: bold;
  color: #f37808;
}
#ventasContainer .summary span.label {
  color: #000;
  background: none !important;
  padding: 0 !important;
}
#acuerdosContainer table thead th {
  background: #f70f79 !important;
  color: #fff !important;
}
#acuerdosContainer .summary{
  color: #f70f79; /* mismo rosa del header */
  background: transparent;
  border-radius: 0;
  padding: 0;
}
#acuerdosContainer .summary strong { color: inherit; }
#acuerdosContainer .highlight {
  background: #ffba6e;
}
.negotiation-hint {
  color: #999;
  font-size: 0.9em;
  margin-left: 4px;
}
.pane table {
  display: inline-table;
  width: auto !important;
  min-width: 600px !important;
  white-space: nowrap;
}
#acuerdosContainer {
  padding: 16px;
}
/* Títulos de secciones en Acuerdos en rosa */
#acuerdosContainer h3 {
  color: var(--ac-pink);
}
#acuerdos.pane { overflow-x: auto; }
#acuerdosControls {
  position: sticky;
  top: 0;
  z-index: 5;
  background: #fff;
  padding: 8px 0;
}
#acuerdosTableWrap {
  overflow-x: auto;
  max-width: 100%;
  -webkit-overflow-scrolling: touch;
}
#acuerdosTableWrap table { width: max-content !important; }
/* === Botón refresh rosa de Acuerdos === */
:root { --ac-pink: #f70f79; }
.btn-refresh{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; font-size:.9em; font-weight:600;
  background:#fff; color:var(--ac-pink);
  border:1px solid var(--ac-pink); border-radius:8px;
  cursor:pointer;
}
.btn-refresh:hover{ background:rgba(247,15,121,.06); }
.btn-refresh .icon{
  width:18px; height:18px; flex:0 0 18px;
  stroke: var(--ac-pink); fill: none; stroke-width: 2;
  stroke-linecap: round; stroke-linejoin: round;
}
.btn-refresh.loading{ opacity:.85; cursor:not-allowed !important; }
.btn-refresh .spinner{
  width:16px; height:16px; display:inline-block;
  border:2px solid #ddd; border-top-color:var(--ac-pink);
  border-radius:50%; animation:spin .8s linear infinite;
}
/* === Botón refresh naranja para Ventas (mismo look que Acuerdos) === */
.btn-refresh-orange{
  display:inline-flex; align-items:center; gap:8px;
  padding:6px 10px; font-size:.9em; font-weight:600;
  background:#fff; color:var(--ve-orange);
  border:1px solid var(--ve-orange); border-radius:8px;
  cursor:pointer;
}
.btn-refresh-orange:hover{ background:rgba(243,120,8,.06); }
.btn-refresh-orange.loading{ opacity:.85; cursor:not-allowed !important; }
.btn-refresh-orange .icon{
  width:18px; height:18px; flex:0 0 18px;
  stroke: var(--ve-orange); fill: none; stroke-width: 2;
  stroke-linecap: round; stroke-linejoin: round;
}
.btn-refresh-orange .spinner{
  width:16px; height:16px; display:inline-block;
  border:2px solid #ddd; border-top-color:var(--ve-orange);
  border-radius:50%; animation:spin .8s linear infinite;
}
/* por si aún no existe la animación */
@keyframes spin{to{transform:rotate(360deg)}}
:root{
  --ac-pink: #f70f79;
  --ac-paid-bg: #ffe6f1;
  --ac-mora: #c01414;
  --ve-orange: #f37808; /* Ventas */
}
/* sólo columnas de cuotas en estado Pagado */
#acuerdosContainer table tbody tr.row-paid td.qcell {
  background: var(--ac-paid-bg);
}
/* todo el acuerdo cuando TODAS las cuotas están pagadas */
#acuerdosContainer table tbody tr.group-all-paid td.qcell,
#acuerdosContainer table tbody tr.group-all-paid td.head-cols {
  background: var(--ac-paid-bg);
}
/* cabecera del acuerdo en rojo si el acuerdo tiene alguna cuota en mora */
#acuerdosContainer table tbody tr.group-has-mora td.head-cols {
  color: var(--ac-mora);
  font-weight: 700;
}
/* sólo la fila de la cuota en mora en rojo y negrita */
#acuerdosContainer table tbody tr.row-mora td.qcell {
  color: var(--ac-mora);
  font-weight: 700;
}
/* botón Paz y salvo */
.ps-btn{
  cursor:pointer;
  font-size:18px;
  line-height:1;
  background: transparent;
  border: 0;
}
.ps-btn:hover{ transform: scale(1.05); }
/* ===== Modal lote de membresías ===== */
.batch-btn{
  background:#6c63ff; color:#fff; border:0; border-radius:6px; padding:6px 12px; font-weight:600; cursor:pointer;
}
.batch-grid{
  display:grid;
  /* cédulas más angosta; resultados un poco más ancha */
  grid-template-columns: 0.8fr 1.3fr 1fr;
  gap:12px; margin-top:8px; align-items:start;
}
.batch-col{ display:flex; flex-direction:column; gap:8px; }
.batch-col textarea{
  width:100%; min-height:260px; resize:vertical; padding:8px;
  border:1px solid #ccc; border-radius:6px;
  font-family:'Montserrat',sans-serif; font-size:14px; line-height:1.35;
}
.batch-col .box{
  min-height:260px; max-height:420px;
  padding:8px; border:1px dashed #ccc; border-radius:6px; background:#fafafa;
  overflow-y:auto; overflow-x:auto;
  white-space:normal; word-break:break-word;
  font-family:'Montserrat',sans-serif; font-size:14px; line-height:1.35;
}
.batch-col .mini{ font-size:.9em; color:#666; }
/* listas de resultados: mismo tamaño que textarea */
#batchResultsList, #batchAddList{
  margin:0;
  padding-left:0;
  list-style:none;                 /* sin numeración */
  font-size:14px;                  /* mismo tamaño que textarea */
  line-height:1.35;
  font-family:'Montserrat',sans-serif;
}
/* cada fila corresponde a la misma línea de la columna de cédulas */
#batchResultsList li, #batchAddList li { padding:2px 0; }

/* ====== NUEVO: filas de pares con flecha y columnas fijas ====== */
.pair-list li{
  display:grid;
  grid-template-columns: 140px 24px 1fr; /* izquierda | flecha | derecha */
  align-items:center;
  gap:6px;
}
/* en la lista de AGREGAR (correo ➡️ estado) el email ocupa la parte flexible y el estado a la derecha */
#batchAddList.pair-list li{
  grid-template-columns: 1fr 24px 140px; /* email (derecha) | flecha | estado */
}
.pair-list li .left{
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.pair-list li .arrow{ text-align:center; }
.pair-list li .right{ overflow-wrap:anywhere; }
/* correo a la derecha en la tercera columna */
#batchAddList.pair-list li .left{ text-align:right; }

/* Estilos para botones de WhatsApp deshabilitados */
button[onclick*="sendToWhatsApp"]:disabled:hover,
button[onclick*="openWhatsApp"]:disabled:hover {
  position: relative;
}
button[onclick*="sendToWhatsApp"]:disabled:hover:before,
button[onclick*="openWhatsApp"]:disabled:hover:before {
  content: "🚫";
  position: absolute;
  top: -25px;
  left: 50%;
  transform: translateX(-50%);
  background: rgba(0, 0, 0, 0.8);
  color: white;
  padding: 4px 8px;
  border-radius: 4px;
  font-size: 12px;
  white-space: nowrap;
  z-index: 1000;
  pointer-events: none;
}

/* ===== RESPONSIVE DESIGN - MOBILE ===== */

/* Botón hamburguesa para móvil */
#menuToggle {
  display: none;
  position: fixed;
  top: 12px;
  left: 12px;
  z-index: 300;
  background: #00162C;
  color: #fff;
  border: none;
  width: 40px;
  height: 40px;
  border-radius: 6px;
  cursor: pointer;
  font-size: 20px;
  align-items: center;
  justify-content: center;
}

/* Media query para tablets y móviles */
@media (max-width: 768px) {
  /* Mostrar botón hamburguesa */
  #menuToggle {
    display: flex;
  }

  /* Sidebar más estrecho en móvil y oculto por defecto */
  #sidebar {
    width: 200px;
    left: -200px;
    transition: left 0.3s ease;
  }

  /* Sidebar visible cuando está activo */
  #sidebar.active {
    left: 0;
  }

  /* Overlay para cerrar el menú al hacer click fuera */
  #sidebar::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    background: rgba(0, 0, 0, 0.5);
    opacity: 0;
    pointer-events: none;
    transition: opacity 0.3s ease;
    z-index: -1;
  }

  #sidebar.active::before {
    opacity: 1;
    pointer-events: all;
  }

  /* Ajustar topbar para que ocupe todo el ancho */
  #topbar {
    left: 0;
    padding-left: 60px; /* Espacio para el botón hamburguesa */
    padding-right: 8px;
    height: 90px; /* Más alto para acomodar búsqueda en dos filas */
    flex-wrap: wrap;
    align-content: center;
  }

  /* Ajustar main para que ocupe todo el ancho y empiece más abajo */
  #main {
    left: 0;
    top: 90px;
  }

  /* Contenedor de búsqueda en su propia fila */
  #topbar > #searchId,
  #topbar > #searchBtn {
    order: 1;
  }

  /* Usuario y status en segunda fila */
  #topbar > #statusTop,
  #topbar > #currentUser {
    order: 2;
  }

  /* Ajustar search para que ocupe más espacio */
  #searchId {
    flex: 1;
    min-width: 120px;
    max-width: none;
    margin-right: 8px;
    font-size: 1em;
    padding: 0.6rem 1rem;
  }

  #searchBtn {
    flex-shrink: 0;
    padding: 0.6rem 1.2rem;
    font-size: 1em;
  }

  /* Hacer el topbar más compacto */
  #topbar {
    font-size: 0.9em;
    gap: 8px;
  }

  /* Layout de Membresías en columna vertical para móvil */
  .memb-layout {
    grid-template-columns: 1fr;
    grid-template-rows: auto auto auto;
    gap: 20px;
  }

  .memb-actions {
    flex-direction: row;
    position: static;
  }

  .memb-actions .batch-btn {
    width: auto;
  }

  /* Ajustar controles de Links para que no se superpongan */
  #linksControls {
    left: 0;
    top: 90px;
    flex-wrap: wrap;
    gap: 8px;
    padding-left: 12px;
    padding-right: 12px;
    z-index: 50; /* Debajo del sidebar (z-index: 100) */
  }

  #statusTop {
    flex: 1;
    margin-left: 0;
  }

  #currentUser {
    font-size: 0.8em;
    margin-left: 0;
  }

  /* Ajustar contenedor de links */
  #links.pane.active #linksContainer {
    padding-top: 70px;
  }
}

/* Media query para móviles muy pequeños */
@media (max-width: 480px) {
  /* Sidebar aún más estrecho en móviles pequeños */
  #sidebar {
    width: 180px;
    left: -180px;
  }

  /* Hacer el logo más pequeño en el sidebar */
  #sidebar .logo {
    padding: 0.5rem;
  }

  .logo-img {
    max-width: 80%;
  }

  /* Reducir padding de items del sidebar */
  #sidebar nav li {
    padding: 0.6rem 0.8rem;
    font-size: 0.9em;
  }

  /* Ajustar altura del topbar - mantener altura para 2 filas */
  #topbar {
    height: 85px;
    padding-left: 55px; /* Espacio para el botón hamburguesa */
    padding-right: 6px;
  }

  #main {
    top: 85px;
  }

  /* Ajustar búsqueda en móvil pequeño */
  #searchId {
    font-size: 0.9em;
    padding: 0.4rem 0.6rem;
  }

  #searchBtn {
    padding: 0.45rem 0.8rem;
    font-size: 0.9em;
  }

  /* Ajustar texto de status */
  #statusTop {
    font-size: 0.85em;
  }

  #currentUser {
    font-size: 0.75em;
  }

  /* Ajustar formularios en móvil */
  .form-row {
    flex-direction: column;
    align-items: stretch;
  }

  .label {
    border-radius: 4px 4px 0 0;
    width: 100%;
  }

  .input,
  select {
    border-radius: 0 0 4px 4px;
  }

  /* Ajustar modales en móvil */
  .modal-dialog {
    width: 95vw;
    max-width: 95vw;
    padding: 16px;
  }

  /* Ajustar grid de batch en móvil */
  .batch-grid {
    grid-template-columns: 1fr;
    gap: 16px;
  }

  /* Ajustar tablas en móvil */
  .pane {
    padding: 12px;
  }

  table {
    font-size: 0.85em;
  }

  th, td {
    padding: 6px 4px;
  }

  /* Ajustar controles de Links */
  #linksControls {
    top: 85px;
  }
}

/* === Web Pig Styles === */
#webpig.active {
  display: flex !important;
  flex-direction: column;
  overflow: hidden;
  max-height: calc(100vh - 60px);
}

.webpig-fixed-header {
  flex-shrink: 0;
  background: #fff;
  z-index: 50;
  padding: 1rem 1rem 0.5rem;
  margin: -1rem -1rem 0 -1rem;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

#webpigContainer {
  flex: 1;
  overflow-y: auto;
  overflow-x: hidden;
  padding: 0 1rem;
  margin-top: 0;
}

#webhooksTable {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem;
}

#webhooksTable thead {
  position: sticky;
  top: 0;
  z-index: 100;
}

#webhooksTable thead th {
  background: #D63384;
  box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}

.webpig-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding-bottom: 1rem;
  border-bottom: 2px solid #e0e0e0;
}

#webpigTitle {
  margin: 0;
  font-size: 1.5rem;
  color: #D63384;
}

#refreshWebhooksBtn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  font-size: 0.95em;
  font-weight: 600;
  background: #D63384;
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: background 0.2s;
}

#refreshWebhooksBtn:hover {
  background: #B82974;
}

#refreshWebhooksBtn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

/* Feature Flags Controls */
.webpig-controls {
  padding: 1rem 0;
  background: #fff9e6;
  border-radius: 8px;
  margin-top: 1rem;
  margin-bottom: 0;
}

.feature-flags-container {
  display: flex;
  gap: 2rem;
  align-items: center;
  justify-content: center;
  padding: 0 1rem;
}

.feature-flag-item {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.flag-label {
  font-size: 0.9rem;
  font-weight: 600;
  color: #00162C;
  white-space: nowrap;
}

/* Toggle Switch */
.toggle-switch {
  position: relative;
  display: inline-block;
  width: 50px;
  height: 26px;
  cursor: pointer;
}

.toggle-switch input {
  opacity: 0;
  width: 0;
  height: 0;
}

.toggle-switch .slider {
  position: absolute;
  cursor: pointer;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-color: #ccc;
  transition: 0.3s;
  border-radius: 26px;
}

.toggle-switch .slider:before {
  position: absolute;
  content: "";
  height: 20px;
  width: 20px;
  left: 3px;
  bottom: 3px;
  background-color: white;
  transition: 0.3s;
  border-radius: 50%;
}

.toggle-switch input:checked + .slider {
  background-color: #FF9EBA;
}

.toggle-switch input:checked + .slider:before {
  transform: translateX(24px);
}

.toggle-switch input:disabled + .slider {
  opacity: 0.5;
  cursor: not-allowed;
}

.toggle-switch input:disabled:not(:checked) + .slider {
  background-color: #e0e0e0;
}

.flags-error-msg {
  text-align: center;
  padding: 0.5rem 1rem;
  margin-top: 0.75rem;
  background: #f8d7da;
  color: #721c24;
  border-radius: 4px;
  font-size: 0.85rem;
}

/* Tabla de webhooks - Header */
#webhooksTable th {
  padding: 12px 8px;
  text-align: center;
  font-weight: 600;
  color: #ffffff;
  border-bottom: 2px solid #dee2e6;
  white-space: nowrap;
  background: #D63384;
  position: relative;
}

/* Tabla de webhooks - Body */
#webhooksTable tbody tr {
  border-bottom: 1px solid #e9ecef;
  transition: background-color 0.2s;
}

#webhooksTable tbody tr:hover {
  background-color: #f8f9fa;
}

#webhooksTable td {
  padding: 10px 8px;
  vertical-align: middle;
}

#webhooksTable td.id-col {
  font-family: monospace;
  font-size: 0.85rem;
  font-weight: 600;
  color: #D63384;
  text-align: center;
  min-width: 60px;
  max-width: 80px;
}

#webhooksTable td.invoice-col {
  font-family: monospace;
  font-size: 0.82rem;
  color: #495057;
  max-width: 110px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#webhooksTable td.customer-col {
  min-width: 200px;
  max-width: 250px;
}

#webhooksTable td.customer-col .customer-name {
  font-weight: 600;
  color: #00162C;
  display: block;
  margin-bottom: 2px;
  font-size: 0.9rem;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#webhooksTable td.customer-col .customer-cedula {
  font-size: 0.75rem;
  color: #6c757d;
  font-family: monospace;
  margin-bottom: 2px;
  display: block;
}

#webhooksTable td.customer-col .customer-email {
  font-size: 0.75rem;
  color: #6c757d;
  display: block;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  max-width: 100%;
}

#webhooksTable td.customer-col .customer-phone {
  font-size: 0.75rem;
  color: #6c757d;
  font-family: monospace;
  display: block;
  margin-top: 2px;
}

#webhooksTable td.product-col {
  max-width: 200px;
  min-width: 150px;
  font-size: 0.85rem;
  color: #495057;
  white-space: normal;
  word-wrap: break-word;
  line-height: 1.3;
}

#webhooksTable td.estado-col {
  text-align: center;
  width: 80px;
  font-size: 1.3rem;
}

/* Columnas de stages con íconos */
#webhooksTable td.stage-col {
  text-align: center;
  width: 60px;
}

.stage-icon {
  font-size: 1.3rem;
  cursor: pointer;
  transition: transform 0.2s;
  display: inline-block;
  user-select: none;
}

.stage-icon:hover {
  transform: scale(1.2);
}

.stage-icon.success {
  color: #28a745;
}

.stage-icon.error {
  color: #dc3545;
}

.stage-icon.pending {
  color: #ffc107;
}

.stage-icon.not-run {
  color: #6c757d;
  opacity: 0.3;
}

.stage-icon.not-applicable {
  color: #6c757d;
  opacity: 0.2;
  cursor: default;
  font-size: 1.1rem;
}

.stage-icon.not-applicable:hover {
  transform: none;
}

.webhook-empty {
  text-align: center;
  padding: 3rem 1rem;
  color: #888;
  font-size: 1.1rem;
}

.webhook-loading {
  text-align: center;
  padding: 2rem 1rem;
  color: #666;
}

.webhook-error {
  background: #f8d7da;
  color: #721c24;
  padding: 1rem;
  border-radius: 8px;
  margin-bottom: 1rem;
}

/* Modal de detalles de stage */
#stageDetailsModal .modal-content {
  position: relative;
  background: #fff;
  padding: 24px;
  border-radius: 12px;
  box-shadow: 0 8px 24px rgba(0,0,0,0.12);
  max-width: 800px;
  width: 90%;
  max-height: 85vh;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

#stageDetailsModal h2 {
  margin: 0 0 1rem 0;
  color: #00162C;
  font-size: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid #e9ecef;
}

#stageDetailsBody {
  overflow-y: auto;
  flex: 1;
  padding-right: 8px;
  user-select: text;
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
}

#stageDetailsBody::-webkit-scrollbar {
  width: 8px;
}

#stageDetailsBody::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 4px;
}

#stageDetailsBody::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 4px;
}

#stageDetailsBody::-webkit-scrollbar-thumb:hover {
  background: #555;
}

#stageDetailsModal .modal-actions {
  margin-top: 1.5rem;
  padding-top: 1rem;
  border-top: 1px solid #e9ecef;
  display: flex;
  justify-content: flex-end;
}

#stageDetailsModal .stage-detail-item {
  background: #f8f9fa;
  border-left: 4px solid #dee2e6;
  padding: 1rem;
  margin-bottom: 1rem;
  border-radius: 4px;
  user-select: text;
}

#stageDetailsModal .stage-detail-item.success {
  border-left-color: #28a745;
  background: #d4edda;
}

#stageDetailsModal .stage-detail-item.error {
  border-left-color: #dc3545;
  background: #f8d7da;
}

#stageDetailsModal .stage-detail-item.info {
  border-left-color: #17a2b8;
  background: #d1ecf1;
}

#stageDetailsModal .stage-detail-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
}

#stageDetailsModal .stage-detail-stage {
  font-weight: 600;
  color: #00162C;
  text-transform: uppercase;
  font-size: 0.85rem;
  letter-spacing: 0.5px;
}

#stageDetailsModal .stage-detail-timestamp {
  font-size: 0.8rem;
  color: #6c757d;
}

#stageDetailsModal .stage-detail-details {
  color: #495057;
  margin-bottom: 0.75rem;
  line-height: 1.5;
  user-select: text;
}

#stageDetailsModal .stage-detail-data {
  background: #fff;
  border: 1px solid #dee2e6;
  border-radius: 4px;
  padding: 0.75rem;
  margin-top: 0.5rem;
  user-select: text;
}

#stageDetailsModal .stage-detail-data h4 {
  margin: 0 0 0.5rem 0;
  font-size: 0.85rem;
  color: #6c757d;
  text-transform: uppercase;
  user-select: text;
}

#stageDetailsModal .stage-detail-data pre {
  margin: 0;
  font-size: 0.8rem;
  color: #495057;
  white-space: pre-wrap;
  word-wrap: break-word;
  max-height: 200px;
  overflow-y: auto;
  user-select: text;
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
  cursor: text;
}

#stageDetailsModal .stage-detail-data pre::-webkit-scrollbar {
  width: 6px;
}

#stageDetailsModal .stage-detail-data pre::-webkit-scrollbar-track {
  background: #f1f1f1;
  border-radius: 3px;
}

#stageDetailsModal .stage-detail-data pre::-webkit-scrollbar-thumb {
  background: #888;
  border-radius: 3px;
}

#stageDetailsModal .stage-detail-data pre::-webkit-scrollbar-thumb:hover {
  background: #555;
}

#stageDetailsModal .no-logs {
  text-align: center;
  padding: 2rem;
  color: #6c757d;
  font-style: italic;
}

/* === Web Pig Responsive Styles === */
@media (max-width: 768px) {
  .webpig-header {
    flex-direction: column;
    gap: 0.75rem;
    align-items: stretch;
  }

  #webpigTitle {
    font-size: 1.2rem;
    text-align: center;
  }

  #refreshWebhooksBtn {
    width: 100%;
    justify-content: center;
  }

  .feature-flags-container {
    flex-direction: column;
    gap: 0.75rem;
    padding: 0 0.5rem;
  }

  .feature-flag-item {
    justify-content: space-between;
    width: 100%;
  }

  .flag-label {
    font-size: 0.85rem;
  }

  .toggle-switch {
    width: 44px;
    height: 24px;
  }

  .toggle-switch .slider:before {
    height: 18px;
    width: 18px;
  }

  .toggle-switch input:checked + .slider:before {
    transform: translateX(20px);
  }
}

@media (max-width: 480px) {
  #webpigTitle {
    font-size: 1rem;
  }

  .flag-label {
    font-size: 0.8rem;
  }

  .toggle-switch {
    width: 40px;
    height: 22px;
  }

  .toggle-switch .slider:before {
    height: 16px;
    width: 16px;
  }

  .toggle-switch input:checked + .slider:before {
    transform: translateX(18px);
  }
}

/* === UDEA 2026 Styles === */
.udea-header {
  display: flex;
  justify-content: flex-start;
  align-items: center;
  gap: 1rem;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 2px solid #e0e0e0;
}

.udea-header h2 {
  margin: 0;
  color: #0d6939;
  font-size: 1.5rem;
}

#refreshUdeaBtn {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 10px 16px;
  font-size: 0.95em;
  font-weight: 600;
  background: linear-gradient(135deg, #0d6939 0%, #0a5129 100%);
  color: #fff;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.2s;
}

#refreshUdeaBtn:hover {
  background: linear-gradient(135deg, #0a5129 0%, #084020 100%);
  transform: translateY(-1px);
  box-shadow: 0 4px 8px rgba(13,105,57,0.3);
}

#refreshUdeaBtn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
}

.udea-stats {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
  gap: 1rem;
  margin-bottom: 2rem;
}

.stat-card {
  background: linear-gradient(135deg, #0d6939 0%, #0a5129 100%);
  color: white;
  padding: 1.5rem;
  border-radius: 12px;
  box-shadow: 0 4px 6px rgba(13,105,57,0.2);
  text-align: center;
}

.stat-card h3 {
  margin: 0 0 0.5rem 0;
  font-size: 0.9rem;
  font-weight: 500;
  opacity: 0.9;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.stat-value {
  margin: 0;
  font-size: 1.8rem;
  font-weight: 700;
}

#udeaTableContainer {
  overflow-x: auto;
  margin-top: 1rem;
}

#udeaTable {
  width: 100%;
  border-collapse: collapse;
  font-size: 0.9rem;
  background: white;
  box-shadow: 0 2px 4px rgba(0,0,0,0.05);
}

#udeaTable thead {
  background: #0d6939 !important;
  color: white;
}

#udeaTable thead th {
  padding: 12px 8px;
  text-align: center;
  font-weight: 600;
  white-space: nowrap;
  border-bottom: 2px solid #0a5129;
  background: #0d6939 !important;
  color: white !important;
}

#udeaTable tbody tr {
  border-bottom: 1px solid #e9ecef;
  transition: background-color 0.2s;
  background-color: white;
}

#udeaTable tbody tr:hover {
  background-color: #f0f8f4;
}

#udeaTable td {
  padding: 10px 8px;
  vertical-align: middle;
  color: #0d6939;
}

#udeaTable td.fecha-col {
  min-width: 90px;
  font-family: monospace;
  font-size: 0.85rem;
}

#udeaTable td.documento-col {
  font-family: monospace;
  font-size: 0.85rem;
}

#udeaTable td.nombre-col {
  font-weight: 600;
  min-width: 180px;
}

#udeaTable td.correo-col {
  font-size: 0.85rem;
  min-width: 200px;
  max-width: 250px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

#udeaTable td.telefono-col {
  font-family: monospace;
  font-size: 0.85rem;
  min-width: 130px;
}

#udeaTable td.producto-col {
  min-width: 200px;
  font-size: 0.85rem;
}

#udeaTable td.valor-col,
#udeaTable td.venta-col {
  font-family: monospace;
  font-size: 0.85rem;
  font-weight: 600;
  text-align: right;
  min-width: 110px;
}

#udeaTable td.acuerdo-col {
  font-size: 0.85rem;
  text-transform: capitalize;
}

.udea-empty,
.udea-error {
  text-align: center;
  padding: 3rem 1rem;
  color: #888;
  font-size: 1.1rem;
}

.udea-error {
  background: #f8d7da;
  color: #721c24;
  padding: 1rem;
  border-radius: 8px;
}

/* UDEA Responsive Styles */
@media (max-width: 768px) {
  .udea-header {
    flex-direction: column;
    gap: 1rem;
    align-items: stretch;
  }

  .udea-header h2 {
    font-size: 1.2rem;
    text-align: center;
  }

  .udea-stats {
    grid-template-columns: repeat(2, 1fr);
  }

  .stat-card {
    padding: 1rem;
  }

  .stat-value {
    font-size: 1.4rem;
  }

  #udeaTable {
    font-size: 0.8rem;
  }

  #udeaTable thead th,
  #udeaTable td {
    padding: 8px 4px;
  }
}
